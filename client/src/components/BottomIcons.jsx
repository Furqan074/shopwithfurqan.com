import { useState, useEffect, useRef } from "react";

function BottomIcons() {
  const [isVisible, setIsVisible] = useState(false);
  const chatContainerRef = useRef(null);
  const checkboxRef = useRef(null);

  useEffect(() => {
    const toggleVisibility = () => {
      if (window.scrollY > 200) {
        setIsVisible(true);
      } else {
        setIsVisible(false);
      }
    };

    const handleClickOutside = (event) => {
      if (
        chatContainerRef.current &&
        !chatContainerRef.current.contains(event.target) &&
        checkboxRef.current.checked
      ) {
        checkboxRef.current.checked = false;
      }
    };

    window.addEventListener("scroll", toggleVisibility);
    document.addEventListener("click", handleClickOutside);

    return () => {
      window.removeEventListener("scroll", toggleVisibility);
      document.removeEventListener("click", handleClickOutside);
    };
  }, []);

  return (
    <>
      {isVisible && (
        <div
          className="scroll-to-top"
          onClick={() =>
            window.scrollTo({ top: 0, left: 0, behavior: "smooth" })
          }
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 20V4M5 11L12 4L19 11"
              stroke="black"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
        </div>
      )}
      <div className="bottom-chat" ref={chatContainerRef}>
        <input className="checkbox" type="checkbox" ref={checkboxRef} />
        <span className="button-menu">
          <svg
            width="72"
            height="64"
            viewBox="0 0 72 64"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M4.00281 59.9999L0.282818 58.5199C0.0170156 59.1887 -0.0634285 59.9168 0.049965 60.6275C0.163358 61.3381 0.46639 62.0051 0.927115 62.5579C1.38784 63.1108 1.98919 63.5291 2.66778 63.7688C3.34636 64.0085 4.07705 64.0607 4.78281 63.9199L4.00281 59.9999ZM22.8268 56.2559L24.7228 52.7319L23.4548 52.0519L22.0468 52.3319L22.8268 56.2559ZM10.4988 43.6679L14.2188 45.1479L14.8708 43.4919L14.0868 41.8959L10.4988 43.6679ZM64.0027 31.9999C64.0027 44.9839 52.5907 55.9999 37.8827 55.9999V63.9999C56.4467 63.9999 72.0027 49.9439 72.0027 31.9999H64.0027ZM11.7668 31.9999C11.7668 19.016 23.1828 7.99998 37.8867 7.99998V0C19.3228 0 3.76281 14.056 3.76281 31.9999H11.7668ZM37.8867 7.99998C52.5907 7.99998 64.0027 19.016 64.0027 31.9999H72.0027C72.0027 14.056 56.4507 0 37.8867 0V7.99998ZM37.8827 55.9999C33.0627 55.9999 28.5748 54.7999 24.7228 52.7319L20.9308 59.7759C26.1461 62.5653 31.9683 64.0167 37.8827 63.9999V55.9999ZM4.78281 63.9199L23.6068 60.1759L22.0468 52.3319L3.22281 56.0759L4.78281 63.9239V63.9199ZM14.0868 41.8959C12.5591 38.8207 11.7677 35.4337 11.7668 31.9999H3.76281C3.76281 36.7999 4.89081 41.3519 6.9068 45.4399L14.0868 41.8959ZM6.7828 42.1879L0.282818 58.5239L7.7148 61.4759L14.2108 45.1439L6.7788 42.1879H6.7828Z"
              fill="white"
            />
            <path
              d="M24.0029 35.9999C26.212 35.9999 28.0029 34.209 28.0029 31.9999C28.0029 29.7907 26.212 27.9999 24.0029 27.9999C21.7937 27.9999 20.0029 29.7907 20.0029 31.9999C20.0029 34.209 21.7937 35.9999 24.0029 35.9999Z"
              fill="white"
            />
            <path
              d="M38.0028 35.9999C40.2119 35.9999 42.0028 34.209 42.0028 31.9999C42.0028 29.7907 40.2119 27.9999 38.0028 27.9999C35.7937 27.9999 34.0028 29.7907 34.0028 31.9999C34.0028 34.209 35.7937 35.9999 38.0028 35.9999Z"
              fill="white"
            />
            <path
              d="M52.0028 35.9999C54.2119 35.9999 56.0028 34.209 56.0028 31.9999C56.0028 29.7907 54.2119 27.9999 52.0028 27.9999C49.7937 27.9999 48.0028 29.7907 48.0028 31.9999C48.0028 34.209 49.7937 35.9999 52.0028 35.9999Z"
              fill="white"
            />
          </svg>
        </span>
        <a
          className="option-a option"
          href="https://m.me/shopwithfurqan/?text=What+are+the+delivery+charges?"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg
            width="66"
            height="66"
            viewBox="0 0 66 66"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M36.0174 40.8595L27.5907 32.1036L11.3562 41.08L29.151 22.199L37.5777 30.9548L53.8056 21.9785L36.0174 40.8595ZM32.5842 0C14.5887 0 0 13.6407 0 30.471C0 40.0431 4.72025 48.585 12.1068 54.171V65.8333L23.226 59.6647C26.1885 60.4943 29.332 60.9419 32.5842 60.9419C50.583 60.9419 65.1717 47.298 65.1717 30.471C65.1717 13.6407 50.583 0 32.5842 0Z"
              fill="black"
            />
          </svg>{" "}
        </a>
        <a
          className="option-b option"
          href="https://wa.me/+8801886556706/?text=What+are+the+delivery+charges?"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg
            width="74"
            height="74"
            viewBox="0 0 74 74"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19.598 60.8114L22.2526 62.3624C26.7292 64.9738 31.8211 66.3445 37.0036 66.3334C42.8052 66.3334 48.4765 64.613 53.3004 61.3898C58.1242 58.1666 61.8839 53.5854 64.1041 48.2254C66.3243 42.8655 66.9052 36.9675 65.7733 31.2774C64.6415 25.5873 61.8478 20.3606 57.7454 16.2582C53.6431 12.1559 48.4164 9.36217 42.7263 8.23034C37.0362 7.09851 31.1382 7.6794 25.7783 9.89958C20.4183 12.1197 15.8371 15.8795 12.6139 20.7033C9.39067 25.5272 7.6703 31.1985 7.6703 37C7.6596 42.1842 9.03163 47.2774 11.645 51.7547L13.1923 54.4094L10.798 63.213L19.598 60.8114ZM0.351637 73.6667L5.30897 55.4507C2.04182 49.8515 0.325615 43.4828 0.33697 37C0.33697 16.749 16.7526 0.333374 37.0036 0.333374C57.2546 0.333374 73.6703 16.749 73.6703 37C73.6703 57.251 57.2546 73.6667 37.0036 73.6667C30.5237 73.6779 24.1578 71.963 18.5603 68.6984L0.351637 73.6667ZM23.7706 19.796C24.2644 19.7618 24.757 19.7569 25.2483 19.7814C25.4463 19.796 25.6443 19.8156 25.8423 19.84C26.4253 19.906 27.067 20.2617 27.2833 20.753C28.376 23.2342 29.4369 25.7275 30.466 28.233C30.6933 28.7904 30.5576 29.5054 30.125 30.202C29.905 30.5577 29.5603 31.0564 29.1606 31.566C28.7463 32.0977 27.8553 33.073 27.8553 33.073C27.8553 33.073 27.4923 33.5057 27.6316 34.0447C27.683 34.25 27.8516 34.547 28.0056 34.7964L28.222 35.1447C29.1606 36.7104 30.422 38.298 31.962 39.794C32.402 40.2194 32.831 40.6557 33.293 41.0627C35.009 42.577 36.9523 43.8127 39.0496 44.7294L39.068 44.7367C39.3796 44.8724 39.5373 44.9457 39.992 45.14C40.2193 45.2354 40.4528 45.316 40.6923 45.382C40.7803 45.4065 40.8695 45.4199 40.96 45.4224C41.1691 45.4303 41.3769 45.3871 41.5654 45.2963C41.754 45.2056 41.9174 45.0701 42.0416 44.9017C44.6926 41.6897 44.9383 41.4807 44.9566 41.4807V41.488C45.1408 41.3156 45.3599 41.1848 45.599 41.1045C45.8381 41.0241 46.0917 40.9961 46.3426 41.0224C46.5675 41.0322 46.7839 41.081 46.9916 41.169C48.9386 42.06 52.125 43.4497 52.125 43.4497L54.259 44.4067C54.6183 44.579 54.9446 44.986 54.9556 45.3784C54.9703 45.624 54.9923 46.02 54.908 46.746C54.7906 47.6957 54.5046 48.836 54.2186 49.4337C54.0204 49.8402 53.7607 50.2137 53.4486 50.541C53.0783 50.9292 52.6733 51.2827 52.2386 51.597C51.9355 51.8219 51.7828 51.9319 51.7803 51.927C51.3243 52.2165 50.8557 52.4856 50.376 52.7337C49.4315 53.234 48.389 53.5219 47.3216 53.577C46.6433 53.6137 45.965 53.665 45.283 53.6284C45.2536 53.6284 43.2003 53.3094 43.2003 53.3094C37.9873 51.9379 33.1662 49.3692 29.1203 45.8074C28.2916 45.0777 27.5216 44.293 26.737 43.512C23.481 40.267 21.0133 36.7654 19.5136 33.458C18.7528 31.8345 18.3406 30.0696 18.3036 28.277C18.2899 26.0504 19.0188 23.8828 20.3753 22.117C20.643 21.7724 20.896 21.413 21.3323 20.9987C21.7943 20.5587 22.0913 20.324 22.4103 20.1627C22.8358 19.9537 23.2978 19.8292 23.7706 19.796Z"
              fill="black"
            />
          </svg>
        </a>
      </div>
    </>
  );
}

export default BottomIcons;
